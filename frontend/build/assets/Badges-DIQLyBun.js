import{u as m,c as B,r as l,b as S,j as e,p as z,q as F,t as _,v as p,m as o,w as E,A as u}from"./index-r-D1rjOl.js";import"/api/js-modules/client-environment";const C={points:_,streak:F,milestone:z};function A(){const g=m(B),[h,f]=l.useState([]),[r,y]=l.useState([]),[d,x]=l.useState(null),a=m(S);async function b(){const[t,s]=await Promise.all([u.fetch("/api/badge/all"),u.fetch(`/api/badge/user/${a==null?void 0:a._id}`)]);f(t),y(s)}l.useEffect(()=>{a!=null&&a._id&&b()},[a]);const c=t=>r.some(s=>s._id===t);l.useEffect(()=>{const t=r.find(s=>new Date(s.earnedDate).toDateString()===new Date().toDateString());t&&x(t)},[r]);const j=h.reduce((t,s)=>(t[s.type]||(t[s.type]=[]),t[s.type].push(s),t),{});return e.jsxs("div",{className:`${g?"ml-63 w-[80vw]":"ml-20 w-[80vw]"} overflow-x-hidden transition-all duration-500 p-6 min-h-screen`,children:[e.jsx("h2",{className:"text-2xl font-bold text-green-700 mb-6 text-center sm:text-left",children:"Badge Cabinet"}),Object.entries(j).map(([t,s])=>{const v=s.sort((i,n)=>c(n._id)-c(i._id));return e.jsxs("div",{className:"mb-10",children:[e.jsxs("h3",{className:"text-xl font-semibold text-green-800 mb-4 capitalize",children:[t," Badges"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:v.map(i=>{const n=c(i._id),w=C[i.type]||p,N=n?{rest:{scale:1,rotate:0},hover:{scale:1.1,rotate:2}}:{rest:{scale:1},hover:{scale:1.03}};return e.jsxs(o.div,{className:`relative p-4 rounded-2xl shadow-md flex flex-col items-center justify-center transition-all duration-300 cursor-pointer 
                      ${n?"bg-gradient-to-br from-yellow-300 to-yellow-500 text-white":"bg-gray-100 text-green-800 opacity-80 hover:opacity-100"}
                    `,variants:N,initial:"rest",whileHover:"hover",children:[n&&e.jsxs(e.Fragment,{children:[e.jsxs(o.div,{className:"absolute inset-0 rounded-2xl z-0 pointer-events-none",initial:{opacity:0},animate:{opacity:[.3,.6,.3]},transition:{repeat:1/0,duration:1.5},children:[e.jsx("div",{className:"absolute inset-0 bg-yellow-200 opacity-30 blur-md"}),e.jsx("div",{className:"absolute inset-0 bg-yellow-400 opacity-50 filter mix-blend-screen"})]}),e.jsx(o.div,{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-20",variants:{rest:{opacity:0,scale:0},hover:{opacity:1,scale:[0,1.5,0]}},transition:{duration:.8,ease:"easeInOut",repeat:1/0},children:e.jsx(E,{className:"text-yellow-300 text-2xl"})})]}),e.jsx(w,{className:"text-4xl mb-2 z-10"}),e.jsx("span",{className:"font-semibold text-center text-sm z-10",children:i.name}),e.jsx("p",{className:"text-xs text-center mt-1 z-10",children:i.description})]},i._id)})})]},t)}),d&&e.jsx(o.div,{className:"fixed top-0 left-0 w-full h-full flex items-center justify-center bg-black bg-opacity-50",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg relative",children:[e.jsx("h2",{className:"text-xl font-bold text-yellow-500",children:"Congrats! ðŸŽ‰"}),e.jsxs("p",{children:["You earned the ",e.jsx("strong",{children:d.name})," badge!"]}),e.jsx(o.div,{className:"absolute inset-0",animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},children:e.jsx(p,{className:"text-yellow-400 text-6xl absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 animate-ping"})}),e.jsx("button",{onClick:()=>x(null),className:"mt-4 px-4 py-2 bg-green-600 text-white rounded",children:"Close"})]})})]})}export{A as default};
