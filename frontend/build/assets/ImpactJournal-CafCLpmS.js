import{G as h,r as i,u as o,c as u,b as g,j as e,A as p,L as f,m as d}from"./index-r-D1rjOl.js";import"/api/js-modules/client-environment";function b(s){return h({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M16.4749 4.935C16.9805 4.90972 17.437 4.8446 17.8262 4.76709L19.5583 6.74664C19.168 7.5663 18.9456 8.34894 18.8629 9.12355C18.7392 10.2814 18.9517 11.2675 19.1081 11.9874L19.1152 12.02C19.2771 12.7643 19.3835 13.2536 19.3679 13.8288C19.3533 14.3705 19.2212 15.0854 18.7112 16.1056C17.6105 18.307 15.0162 18.7716 12.9964 19.7815C12.6702 19.9446 12.3335 20.1308 12.0002 20.3499C11.6669 20.1308 11.3301 19.9445 11.0039 19.7814C8.98405 18.7716 6.38962 18.307 5.28885 16.1055C4.77874 15.0854 4.64666 14.3704 4.63201 13.8287C4.61645 13.2535 4.72283 12.7642 4.8847 12.0198L4.89176 11.9873C5.04823 11.2676 5.2607 10.2815 5.13707 9.12358C5.05436 8.34897 4.83196 7.56633 4.44171 6.74666L6.17384 4.76709C6.56299 4.8446 7.01951 4.90972 7.52512 4.935C8.78997 4.99825 10.402 4.81028 12 3.91846C13.598 4.81028 15.21 4.99825 16.4749 4.935ZM21.0868 11.674C20.7641 10.1954 20.4612 8.8081 22 6.5L18.5 2.5C18.5 2.5 15 4 12 1.5C9 4 5.5 2.5 5.5 2.5L2 6.5C3.53865 8.80805 3.23584 10.1953 2.91312 11.6739C2.60663 13.078 2.28218 14.5645 3.50001 17C5.07707 20.1539 8.20822 20.5102 10.4428 21.7453C11.0423 22.0766 11.5772 22.4712 12.0003 23C12.4234 22.4712 12.9583 22.0766 13.5578 21.7452C15.7921 20.5102 18.9231 20.1539 20.5 17C21.7177 14.5645 21.3933 13.0781 21.0868 11.674ZM14.3776 12.7725L14.9388 16.0451L11.9999 14.5L9.06098 16.0451L9.62227 12.7725L7.24463 10.4549L10.5304 9.97746L11.9999 7L13.4694 9.97746L16.7552 10.4549L14.3776 12.7725Z"},child:[]}]})(s)}function j({points:s}){return e.jsx("div",{className:"fixed top-4 right-4 bg-green-200 px-4 py-2 rounded-lg shadow-lg flex items-center",children:e.jsxs("span",{className:"font-semibold text-green-800",children:["Eco-Points: ",s]})})}function C({badges:s}){const t=s.length;return e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-700 mb-2 ",children:"Badges Unlocked"}),e.jsx(f,{to:"/badges",children:e.jsxs(d.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200},className:"flex",children:[e.jsx(b,{className:"w-20 h-20 text-green-800"}),e.jsx("span",{className:`relative w-[36px] h-[36px] text-sm font-extrabold shadow-2xl -ml-14.5 mt-6\r
                         shadow-amber-400  text-center bg-green-800 text-amber-400 rounded-b-full`,children:e.jsx("span",{className:"absolute top-1 right-1 tracking-wider",children:t<=9?"00"+t:t<=99?"0"+t:t})})]})})]})})}function v({log:s,isOpen:t,onToggle:r}){var l;return e.jsxs("div",{className:"mb-6 ml-6 relative",children:[e.jsx("div",{className:"absolute -left-3 w-6 h-6 bg-green-500 rounded-full border-2 border-white"}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg shadow-md cursor-pointer",onClick:r,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-gray-700",children:new Date(s.date).toDateString()}),e.jsxs("span",{className:"font-semibold text-green-700",children:["+",s.points," pts"]})]}),s.notes&&e.jsx("div",{className:"mt-1 text-sm italic text-gray-600",children:s.notes})]}),t&&e.jsx(d.div,{className:"mt-2 pl-6 p-4 bg-green-100 rounded-lg shadow-inner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"font-medium",children:["Habit: ",((l=s.habit)==null?void 0:l.name)||"N/A"]}),e.jsxs("div",{className:"text-sm",children:["Quantity: ",s.quantity,", COâ‚‚ Saved: ",s.co2Saved," kg"]}),s.notes&&e.jsxs("div",{className:"text-sm text-gray-600",children:['"',s.notes,'"']})]})})]})}function B(){const[s,t]=i.useState([]),[r,l]=i.useState(null),[N,L]=i.useState([]),[w,y]=i.useState(0),m=o(u),a=o(g),x=a==null?void 0:a._id;return i.useEffect(()=>{(async()=>{const c=await p.fetch(`/api/user-log/user/${x}`);console.log("res",c),t(c)})()},[]),console.log("user - ",a),e.jsxs("div",{className:`${m?"ml-63  w-[78vw]":"ml-20  w-[80vw]"} overflow-x-hidden transition-all duration-500 p-6 min-h-screen`,children:[e.jsx(j,{points:a.ecoPoints}),e.jsx(C,{badges:a.badges}),e.jsx("h2",{className:"text-2xl font-bold text-green-800 mb-4",children:"Impact Journal"}),e.jsx("div",{className:"relative border-l-2 border-green-300",children:s.map(n=>e.jsx(v,{log:n,isOpen:r===n._id,onToggle:()=>l(r===n._id?null:n._id)},n._id))})]})}export{B as default};
