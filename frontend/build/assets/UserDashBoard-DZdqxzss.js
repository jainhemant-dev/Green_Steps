import{r as l,j as e,m as d,F as y,a as P,u as b,b as C,c as H,d as S,e as U,f as F,A as c,s as E}from"./index-r-D1rjOl.js";import"/api/js-modules/client-environment";function _({initialData:r={},onCancel:m,onSubmit:u}){const[t,x]=l.useState({name:"",description:"",pointsPerUnit:"",co2PerUnit:""});l.useEffect(()=>{r&&x({name:r.name||"",description:r.description||"",pointsPerUnit:r.pointsPerUnit||"",co2PerUnit:r.co2PerUnit||""})},[r]);const a=n=>x({...t,[n.target.name]:n.target.value}),o=n=>{n.preventDefault(),u(t)};return e.jsx("div",{className:"fixed inset-0 z-20 backdrop-blur-xs bg-opacity-1 flex items-center justify-center p-4",children:e.jsxs(d.form,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl shadow-xl p-6 w-full max-w-md space-y-4",onSubmit:o,children:[e.jsx("h2",{className:"text-xl font-bold text-green-800",children:r!=null&&r._id?"Edit Habit":"New Habit"}),e.jsx("input",{name:"name",placeholder:"Habit Name",value:t.name,onChange:a,required:!0,className:"w-full p-3 border border-green-200 rounded-xl focus:border-green-400"}),e.jsx("textarea",{name:"description",placeholder:"Description (optional)",value:t.description,onChange:a,className:"w-full p-3 border border-green-200 rounded-xl focus:border-green-400"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("input",{name:"pointsPerUnit",type:"number",step:"0.1",max:2,placeholder:"Points per unit",value:t.pointsPerUnit,onChange:a,required:!0,className:"w-full p-3 border border-green-200 rounded-xl focus:border-green-400"}),e.jsx("input",{name:"co2PerUnit",type:"number",step:"0.1",max:2,placeholder:"CO₂ per unit",value:t.co2PerUnit,onChange:a,className:"w-full p-3 border border-green-200 rounded-xl focus:border-green-400"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs("button",{type:"button",onClick:m,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800",children:[e.jsx(y,{})," ",e.jsx("span",{children:"Cancel"})]}),e.jsxs(d.button,{whileHover:{scale:1.05},className:"flex items-center bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-full",type:"submit",children:[e.jsx(P,{className:"mr-2"})," Save"]})]})]})})}function $({userId:r={}}){const[m,u]=l.useState([]),[t,x]=l.useState([]),[a,o]=l.useState(!1),[n,p]=l.useState(null),i=b(C),f=b(H);async function h(){const[s,w]=await Promise.all([c.fetch("/api/habit/global"),c.fetch(`/api/habit/custom/${i==null?void 0:i._id}`)]);u(s),x(w)}l.useEffect(()=>{h()},[]);const g=()=>{p(null),o(!0)},j=s=>{p(s),o(!0)},N=async s=>{confirm("Delete this habit?")&&(await c.fetch(`/api/habit/custom/${i._id}/${s}`),h())},v=async s=>{n?await c.fetch(`/api/habit/custom/${i._id}/${n==null?void 0:n._id}`,{method:"PATCH",body:s}):await c.fetch(`/api/habit/custom/${i._id}`,{method:"POST",body:s}),o(!1),h()};return e.jsxs("div",{className:`${f?"ml-63  w-[80vw]":"ml-20  w-[80vw]"} overflow-x-hidden transition-all duration-500 p-6 min-h-screen`,children:[e.jsxs("header",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-green-800",children:"Your Habits"}),e.jsxs(d.button,{onClick:g,whileHover:{scale:1.05},className:"flex items-center bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-full shadow-xl transition",children:[e.jsx(S,{className:"mr-2"})," New Habit"]})]}),e.jsxs("section",{className:"mb-12",children:[e.jsx("h2",{className:"text-2xl font-semibold text-teal-700 mb-6",children:"Global Habits"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(s=>e.jsxs(d.div,{whileHover:{y:-5,scale:1.02},className:"bg-white rounded-2xl p-6 shadow-xl flex flex-col transition transform hover:shadow-2xl border-l-4 border-green-400",children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-3",children:s.name}),e.jsx("p",{className:"text-base text-gray-600 flex-1",children:s.description||"No description provided."}),e.jsxs("div",{className:"mt-4 text-base text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Points:"})," ",s.pointsPerUnit,e.jsx("span",{className:"ml-4 font-semibold",children:"CO₂:"})," ",s.co2PerUnit,"kg"]})]},s==null?void 0:s._id))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-teal-700 mb-6",children:"Your Custom Habits"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:!!(t!=null&&t.length)&&t.map(s=>e.jsxs(d.div,{whileHover:{y:-5,scale:1.02},className:"bg-white rounded-2xl p-6 shadow-xl flex flex-col transition transform hover:shadow-2xl border-l-4 border-teal-400",children:[e.jsx("h3",{className:"text-xl font-semibold text-green-900 mb-3",children:s.name}),e.jsx("p",{className:"text-base text-gray-600 flex-1",children:s.description||"No description provided."}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-base text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Pts:"})," ",s.pointsPerUnit]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>j(s),className:"text-teal-600 hover:text-teal-800 transition-colors",children:e.jsx(U,{})}),e.jsx("button",{onClick:()=>N(s==null?void 0:s._id),className:"text-red-500 hover:text-red-700 transition-colors",children:e.jsx(F,{})})]})]})]},s._id))})]}),a&&e.jsx(_,{initialData:n,onCancel:()=>o(!1),onSubmit:v})]})}function k(){return e.jsx("div",{children:e.jsx($,{})})}E(k,"UserDashBoard");export{k as default};
